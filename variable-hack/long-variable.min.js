function LV_updateSS(){LV_SSInput&&LV_SS&&(LV_SSInput.value=btoa(LV_SS.join("|")))}function LV_btoaUTF16(t){var n=new Uint16Array(t.length);return Array.prototype.forEach.call(n,function(n,e,i){i[e]=t.charCodeAt(e)}),btoa(String.fromCharCode.apply(null,new Uint8Array(n.buffer)))}function LV_atobUTF16(t){var n=atob(t),e=new Uint8Array(n.length);return Array.prototype.forEach.call(e,function(t,e,i){i[e]=n.charCodeAt(e)}),String.fromCharCode.apply(null,new Uint16Array(e.buffer))}var LV_SSInput,LV_SS;LongVariable=function(){this.instances=[],document.addEventListener("DOMContentLoaded",function(){LV_SSInput||(LV_SSInput=document.querySelector("input[name='SS']")),LV_SS||(LV_SS=atob(LV_SSInput.value).split("|")),this.DOMContentLoaded.bind(this)()}.bind(this))},LongVariableInstance=function(t,n){if(this.factory=n,!t.name||"string"!=typeof t.name)throw new TypeError("LongVariable requires a name of type 'string'");if(!/^\w+$/.test(t.name))throw new RangeError("LongVariable name must only contain word characters ([A-Za-z0-9_])");if(this.name=t.name,t.input?(t.input instanceof Node?this.input=t.input:"string"==typeof t.input?/^#[A-Za-z][\w.:-]*$/.test(t.input)?this.input=document.getElementById(t.input.slice(1)):this.input=document.querySelector(t.input):(!1!==this.warn&&console.warn("LongVariable input is neither a Node nor a string. Defaulting to 'null'"),this.input=null),this.input instanceof Node?(this.input.addEventListener("input",this.onInput.bind(this)),this.input.addEventListener("change",this.onChange.bind(this))):(!1!==this.warn&&console.warn("LongVariable input could not be resolved to a node. Defaulting to 'null'"),this.input=null)):this.input=null,this.output=[],t.output)for(Array.isArray(t.output)||(t.output=[t.output]),i=0;i<t.output.length;i++){var e;t.output[i]instanceof Node?this.output.push(t.output[i]):"string"==typeof t.output[i]?(e=/^#\w+$/.test(t.output[i])?document.getElementById(t.output[i].slice(1)):document.querySelector(t.output[i]),e instanceof Node?this.output.push(e):!1!==this.warn&&console.warn("LongVariable output '"+t.output[i]+"' could not be resolved to a node. Its value will be ignored.")):!1!==this.warn&&console.warn("LongVariable output '"+t.output[i]+"' is neither a Node nor a string. Its value will be ignored.")}if(this.value="","function"==typeof t.decode&&"function"==typeof t.encode){var o=Math.random().toString(36).substr(2,5)+Math.random().toString(36).substr(2,5);if(o!==t.decode(t.encode(o)))throw new Error("LongVariable encode and decode functions must be losslessly reversible");this.decode=t.decode,this.encode=t.encode}this.regex=new RegExp(this.name+":([^,;]*),0")};try{Object.defineProperty(LongVariable.prototype,"size",{get:function(){return this.instances.length}})}catch(t){}LongVariable.prototype.add=function(t){var n=new LongVariableInstance(t,this);return this.instances.push(n),this},LongVariable.prototype.create=function(t){var n=new LongVariableInstance(t,this);return this.instances.push(n),this.instances[this.instances.length-1]},LongVariable.prototype.entries=function(t,n){return null!=t?null!=n?this.instances.slice(t,n):this.instances.slice(t):this.instances},LongVariable.prototype.get=function(t){return this.instances[t]},LongVariable.prototype.first=function(){return this.instances[0]},LongVariable.prototype.last=function(){return this.instances[this.instances.length-1]},LongVariable.prototype.DOMContentLoaded=function(){for(LV_SS=atob(document.querySelector("input[name='SS']").value).split("|"),i=0;i<this.instances.length;i++)this.instances[i].DOMContentLoaded.bind(this.instances[i])()},LongVariableInstance.prototype.DOMContentLoaded=function(){var t=LV_SS[4].match(this.regex);if(t){if(this.value=this.decode(t[1]),this.input&&(input.value=this.value),this.output)for(i=0;i<this.output.length;i++)!1===this.plain?this.output[i].innerHTML=this.value:this.output[i].textContent=this.value}else LV_SS[4]=LV_SS[4].split(";").concat(this.name+":,0").join(";")},LongVariableInstance.prototype.onInput=function(t){this.value=t.target.value,(LV_SSInput||LV_SS)&&(LV_SS[4]=LV_SS[4].replace(this.regex,this.name+":"+this.encode(this.value)+",0"))},LongVariableInstance.prototype.onChange=LV_updateSS,LongVariableInstance.prototype.encode=LV_btoaUTF16,LongVariableInstance.prototype.decode=LV_atobUTF16;