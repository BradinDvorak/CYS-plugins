var ss,ssVariables;MultiVariable=function(){this.instances=[],document.addEventListener("DOMContentLoaded",function(){ss=atob(document.querySelector("input[name='SS']").value).split("|"),ssVariables=JSON.parse("{"+ss.pop().replace(/[A-Z][A-Z0-9]*/g,'"$&"').replace(/,/g,":").replace(/;/g,",")+"}");for(var e=0;e<this.instances.length;e++)(function(){for(var t=this.instances[e],r=t.filter instanceof RegExp?new RegExp(t.filter.source,t.filter.flags.replace(/g|^/i,"g")):null,i=t.replace instanceof RegExp?new RegExp(t.replace.source,t.replace.flags.replace(/g|^/i,"g")):null,a=document.querySelector("input#"+t.input),n=getNodeContent(".dark1border + div > div"),l=0;l<t.length;l++){var s=ssVariables[t.prefix+l];s&&(t.value+=t.deserialize?t.deserialize(s):String.fromCharCode(s))}a&&(a.maxLength=t.length,Array.isArray(t.default)?a.placeholder=t.default[Math.floor(Math.random()*t.default.length)]:"function"==typeof t.default&&(a.placeholder=t.default(t.length)),a.addEventListener("input",function(){var e={},i=this.value;r&&(this.value=i=i.replace(r,"")),t.transform&&(this.value=i=t.transform(i));for(var a=0;a<t.length;a++)e[t.prefix+a]=t.serialize?t.serialize(i.substr(a,1)):i.charCodeAt(a)||0;updateVariables(e)})),t.replace&&replaceTextNode(n,i,t.value)}).bind(this)()}.bind(this))},MultiVariableInstance=function(e,t){this.factory=t,this.default=null,Array.isArray(e.default)||"function"==typeof e.default?this.default=e.default:"string"==typeof e.default&&(this.default=[e.default]),this.filter=null,e.filter&&(e.filter instanceof RegExp?this.filter=e.filter:"string"==typeof e.filter&&e.filter in this.factory.dictionary.FILTER&&(this.filter=this.factory.dictionary.FILTER[e.filter])),this.input="string"==typeof e.input?e.input:null,this.length=parseInt(e.length)||8,this.prefix="string"==typeof e.prefix&&/^[A-Z]/i.test(e.prefix)?e.prefix.toUpperCase():"MULTIVARIABLE"+this.factory.instances.length,this.replace=null,e.replace&&(e.replace instanceof RegExp?this.replace=e.replace:"string"==typeof e.replace&&(this.replace=new RegExp(e.replace.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")))),this.transform=null,e.transform&&("function"==typeof e.transform?this.transform=e.transform:"string"==typeof e.transform&&e.transform in this.factory.dictionary.TRANSFORM&&(this.transform=this.factory.dictionary.TRANSFORM[e.transform])),this.value="","function"==typeof e.deserialize&&"function"==typeof e.serialize?(this.deserialize=e.deserialize,this.serialize=e.serialize):this.deserialize=this.serialize=null},MultiVariable.prototype.add=function(e){var t=new MultiVariableInstance(e,this);return this.instances.push(t),this},MultiVariable.prototype.create=function(e){var t=new MultiVariableInstance(e,this);return this.instances.push(t)},MultiVariable.prototype.entries=function(){return this.instances},MultiVariable.prototype.get=function(e){return this.instances[e]},MultiVariable.prototype.dictionary={FILTER:{INTEGER:/(?!^-|[\d])./,NATURAL:/[^\d]/,NAME:/^[-']|[^-'a-zA-Z]/,NAME_INTERNATIONAL:/^[-']|[^-'a-zA-ZÀ-ÖØ-öø-ÿ]/},TRANSFORM:{LOWERCASE:function(e){return e.toLowerCase()},NAME:function(e){return e.toLowerCase().replace(/(^|-)(.)/g,function(e,t,r){return t+r.toUpperCase()})},UPPERCASE:function(e){return e.toUpperCase()}}},getNodeContent=function(e){return[].slice.call(document.querySelectorAll(e+", "+e+" *")).reduce(function(e,t){return e.concat([].slice.call(t.childNodes))},[])},replaceTextNode=function(e,t,r){for(var i=e.filter(function(e){return 3==e.nodeType&&e.nodeValue.trim()&&t.test(e.data)}),a=0;a<i.length;a++){var n=document.createElement("div"),l=i[a];for(n.innerHTML=l.data.replace(t,r);n.firstChild;)l.parentNode.insertBefore(n.firstChild,l);l.parentNode.removeChild(l)}},updateVariables=function(e){Object.assign(ssVariables,e)},applySS=function(){document.querySelector("input[name='SS']").value=btoa(ss.concat(Object.entries(ssVariables).map(function(e){return e.join(",")}).join(";")).join("|"))},PostBack=function(e,t){applySS();var r=getEl("pbForm");return r.pbAction.value=e||"",r.pbValue.value=t||"",r.submit(),!1};